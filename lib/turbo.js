"use strict";function _createForOfIteratorHelper(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Turbo=function(){function a(){_classCallCheck(this,a),_defineProperty(this,"unpairedTags",["br, hr","img","input"]),this.settings={animation:{duration:300,showClass:"animation-slide-in-fwd-center",hideClass:"animation-slide-out-bck-center"},text:{save:"Save",cancel:"Cancel",confirm:"Confirm",info:"Info",notFound:"No results found",allSelected:"All options have been selected"},notification:{autoHide:!0,autoHideTime:4e3,showCloseButton:!0},select:{searchAlsoValue:!1,notFoundOptionValue:"-",allOptionsSelectedOptionValue:"-",hideDisabledOptions:!1,multiselect:{hideSelected:!0}}}}return _createClass(a,[{key:"addGlobalEventListener",value:function addGlobalEventListener(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:document;e.addEventListener(b,function(b){b.target.matches(a)&&c(b)},d)}},{key:"createElement",value:function createElement(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=document.createElement(a);for(var f in c)if("class"==f){var e;(e=d.classList).add.apply(e,_toConsumableArray(c[f]))}else if("dataset"===f)for(var g in c[f])d.dataset[g]=c[f][g];else d.setAttribute(f,c[f]);return null===b||this.unpairedTags.includes(a)||(d.textContent=b),d}},{key:"beNode",value:function beNode(a){return this.isNode(a)||(a=document.querySelector(a)),a}},{key:"isNode",value:function isNode(a){return a instanceof Node&&"string"!=typeof a}},{key:"isObject",value:function isObject(a){return"object"===_typeof(a)&&!Array.isArray(a)&&null!==a}},{key:"isEmpty",value:function isEmpty(a){return Array.isArray(a)?0===a.length:this.isObject(a)?0===Object.keys(a).length:!!!a}},{key:"insertAfter",value:function insertAfter(a,b){b=this.beNode(b),b.parentNode.insertBefore(a,b.nextSibling)}},{key:"showElement",value:function showElement(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"body",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"append",d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"block",e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{duration:this.settings.animation.duration,showClass:this.settings.animation.showClass};if(b=this.beNode(b),0<Object.entries(e).length){var f;if(null!==e&&void 0!==e&&e.showClass){var g;a.classList.add(null!==(g=e.showClass)&&void 0!==g?g:this.settings.animation.showClass)}a.style.animationDuration="".concat(null!==(f=e.duration)&&void 0!==f?f:this.settings.animation.duration,"ms")}a.style.display=d,"prepend"===c?b.prepend(a):"insertAfter"===c?this.insertAfter(a,b):b.appendChild(a)}},{key:"hideElement",value:function hideElement(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{duration:this.settings.animation.duration,hideClass:this.settings.animation.hideClass},d=a,e=!0;this.isNode(a)||(e=!1,d=document.querySelectorAll(a));var f=c.hideClass?c.hideClass:this.settings.animation.hideClass,g=c.duration?c.duration:this.settings.animation.duration;if(d){for(var j=0;j<(b?d.length:1);j++){var h;a=null!==(h=this.beNode(d[j]))&&void 0!==h?h:d,a&&this.toggleAnimationClass(a,f,g)}for(var i=0;i<(b?d.length:1);i++)(d.length||e)&&function(){var a=e?d:d[i];setTimeout(function(){a.remove()},g)}()}}},{key:"startLoader",value:function startLoader(){var a=this.createElement("div",null,{class:["loader-wrapper"]}),b=this.createElement("div",null,{class:["turbo-loader"]});this.showElement(b,a);for(var c=0;4>c;c++)this.showElement(this.createElement("div"),b,"append","block",{});this.showElement(a,"body","append","block",{duration:100})}},{key:"stopLoader",value:function stopLoader(){var a=document.querySelector("body > .loader-wrapper");this.hideElement(a,!1,{hideClass:"animation-fade-out"})}},{key:"getData",value:function getData(a,b){return a=this.beNode(a),a.getAttribute("data-".concat(b))}},{key:"getCss",value:function getCss(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";a=this.beNode(a);var c=getComputedStyle(a);return""===b?c:c.getPropertyValue(b)}},{key:"showModal",value:function showModal(a,b){var c,d,e,f,g,h=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},j=3<arguments.length?arguments[3]:void 0,k=this.createElement("div",null,{class:["overlay"]}),l={class:["turbo-modal"]};j&&(l.id="".concat(j,"-modal"));var m=this.createElement("div",null,l),n=this.createElement("div",null,{class:["modal-header"]});n.innerHTML="<h2>".concat(a,"</h2>");var o=this.createElement("div",null,{class:["modal-content"]});o.innerHTML=b;var p=this.createElement("div",null,{class:["modal-footer"]}),q="";if(!(null!==i&&void 0!==i&&null!==(c=i.primary)&&void 0!==c&&c.hide)){var r,s,t,u=null!==i&&void 0!==i&&null!==(r=i.primary)&&void 0!==r&&r.text?i.primary.text:this.settings.text.save,v={class:["modal-primary"]};if(null!==i&&void 0!==i&&null!==(s=i.primary)&&void 0!==s&&s["class"]){var w;(w=v["class"]).push.apply(w,_toConsumableArray(i.primary["class"]))}null!==i&&void 0!==i&&null!==(t=i.primary)&&void 0!==t&&t.id&&(v.id=i.primary.id),q=this.createElement("button",u,v)}var x=null!==i&&void 0!==i&&null!==(d=i.cancel)&&void 0!==d&&d.text?i.cancel.text:this.settings.text.cancel,y={class:["modal-secondary"]};if(null!==i&&void 0!==i&&null!==(e=i.cancel)&&void 0!==e&&e["class"]){var z;(z=y["class"]).push.apply(z,_toConsumableArray(i.cancel["class"]))}null!==i&&void 0!==i&&null!==(f=i.cancel)&&void 0!==f&&f.id&&(y.id=i.cancel.id);var A=this.createElement("button",x,y);this.showElement(A,p,"append","block",{}),""!==q&&this.showElement(q,p,"append","block",{}),this.showElement(n,m,"append","block",{}),this.showElement(o,m,"append","block",{}),this.showElement(p,m,"append","flex",{}),this.showElement(m,k,"append","block",{}),this.showElement(k),null!==i&&void 0!==i&&null!==(g=i.primary)&&void 0!==g&&g.callback&&document.querySelector(".turbo-modal .modal-primary").addEventListener("click",function(){i.primary.callback()}),document.querySelector(".turbo-modal .modal-secondary").addEventListener("click",function(){h.hideElement(".overlay")})}},{key:"showConfirmation",value:function showConfirmation(a,b){var c,d,e,f,g,h,i,j=this,k=this.createElement("div",null,{class:["overlay"]}),l=this.createElement("div",null,{class:["turbo-confirmation"]}),m=this.createElement("div",null,{class:["confirmation-content"]}),n=this.createElement("p",a);this.showElement(n,m,"append","block",{});var o=this.createElement("div",null,{class:["confirmation-footer"]}),p={class:["confirmation-confirm"]},q={class:["confirmation-cancel"]};if(null!==b&&void 0!==b&&null!==(c=b.confirm)&&void 0!==c&&c["class"]){var r;(r=p["class"]).push.apply(r,_toConsumableArray(b.confirm["class"]))}if(null!==b&&void 0!==b&&null!==(d=b.confirm)&&void 0!==d&&d.id&&(p.id=b.confirm.id),null!==b&&void 0!==b&&null!==(e=b.cancel)&&void 0!==e&&e["class"]){var s;(s=q["class"]).push.apply(s,_toConsumableArray(b.cancel["class"]))}null!==b&&void 0!==b&&null!==(f=b.cancel)&&void 0!==f&&f.id&&(q.id=b.cancel.id);var t=null!==b&&void 0!==b&&null!==(g=b.confirm)&&void 0!==g&&g.text?b.confirm.text:this.settings.text.confirm,u=null!==b&&void 0!==b&&null!==(h=b.cancel)&&void 0!==h&&h.text?b.cancel.text:this.settings.text.cancel,v=this.createElement("button",t,p),w=this.createElement("button",u,q);return null!==b&&void 0!==b&&null!==(i=b.cancel)&&void 0!==i&&i.hide||this.showElement(w,o,"append","block",{}),this.showElement(v,o,"append","block",{}),this.showElement(m,l,"append","block",{}),this.showElement(o,l,"append","flex",{}),this.showElement(l,k,"append","block",{}),this.showElement(k),new Promise(function(a,c){var d;null!==b&&void 0!==b&&null!==(d=b.cancel)&&void 0!==d&&d.hide||document.querySelector(".turbo-confirmation .confirmation-cancel").addEventListener("click",function(){c(),j.hideElement("body > .overlay")}),document.querySelector(".turbo-confirmation .confirmation-confirm").addEventListener("click",function(){a(),j.hideElement("body > .overlay")})})}},{key:"notify",value:function notify(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.settings.text.info,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"error",e=this.createElement("div",null,{class:["turbo-notification",d]}),f=this.createElement("div",null,{class:["notification-level"]}),g=this.createElement("div",null,{class:["notification-content"]}),h=this.createElement("h2",c),i=this.createElement("p",a);this.showElement(h,g,"append","block",{}),this.showElement(i,g,"append","block",{}),this.showElement(f,e,"append","block",{}),(this.settings.notification.showCloseButton||!this.settings.notification.autoHide)&&(e.innerHTML+="<div class=\"close-button\"></div>"),this.showElement(g,e,"append","block",{}),this.showElement(e,"body","append","flex",{showClass:"animation-slide-in-fwd-left"});var j=!1;(this.settings.notification.showCloseButton||!this.settings.notification.autoHide)&&document.querySelector(".turbo-notification .close-button").addEventListener("click",function(a){b.hideElement(a.target.closest(".turbo-notification"),!1,{hideClass:"animation-slide-out-bck-left"}),j=!0}),this.settings.notification.autoHide&&setTimeout(function(){j||(b.hideElement(e,!1,{hideClass:"animation-slide-out-bck-left"}),j=!0)},this.settings.notification.autoHideTime+this.settings.animation.duration)}},{key:"floatingPlaceholders",value:function floatingPlaceholders(){var a,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";""===b?a=document:(b=this.beNode(b),a=b);var c=a.querySelectorAll(".turbo-ui.input input:not([type=\"submit\"])"),d=a.querySelectorAll(".turbo-ui.input textarea");this.bindFloatingInput(c),this.bindFloatingInput(d)}},{key:"bindFloatingInput",value:function bindFloatingInput(a){for(var b=0;b<a.length;b++)""!==a[b].value&&a[b].classList.add("filled"),a[b].addEventListener("input",function(a){""===a.target.value?a.target.classList.remove("filled"):a.target.classList.add("filled")})}},{key:"capitalizeFirstLetter",value:function capitalizeFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}},{key:"toggleAnimationClass",value:function toggleAnimationClass(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.settings.animation.showClass,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.settings.animation.duration,d=/^animation-.+$/,e="";if(""!==a.classList.value){var f,g=_createForOfIteratorHelper(a.classList);try{for(g.s();!(f=g.n()).done;){var h=f.value,i=d.exec(h);if(null!==i){e=i;break}}}catch(a){g.e(a)}finally{g.f()}}""!==e&&a.classList.remove(e),a.style.animationDuration="".concat(c,"ms"),a.classList.add(b)}}]),a}();module.exports=Turbo;